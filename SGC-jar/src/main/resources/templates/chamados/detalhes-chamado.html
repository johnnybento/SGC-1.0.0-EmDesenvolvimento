<!DOCTYPE html>
<html lang="pt" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/layout-padrao}"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<body>

<section layout:fragment="conteudo">

<div class="page-header">
				<div class="container-fluid">

					       <h1>					
				 	             Detalhes do Chamado 
				 	             
				           </h1>
			    				    
				</div>
			</div>

			<div class="container-fluid">

                
		 <form method="POST" class="form-vertical  js-form-loading"  >
     			<div class="alert  alert-success"
					th:if="${!#strings.isEmpty(mensagem)}">
					<span th:text="${mensagem}"></span><br />

   				</div>
   				<div class="row">
                             <div class="col-sm-4">                      
                                   <div class="form-group">
						                  <label for="input-chamado-id">ID</label>
                                          <input id="input-chamado-id" th:value="${chamado.id}" readonly="readonly" class="form-control" />
					               </div>
                             </div>   				
   				</div>
   			<div class="form-group">
					<label for="textarea-chamado-descricao">Descrição do problema</label>
					<textarea  readonly="readonly" id="textarea-chamado-descricao" maxlength="600" th:text="${chamado.descricao}" rows="3"
					class="form-control"></textarea>
			</div>
   				
   				
   			<div class="row">
<!--    	             <div class="col-sm-12">
					  <div class="form-group">		
                           <fieldset >
                                     <legend style="font-size: 20px;">Equipamento com defeito</legend>
   			               </fieldset>
   			          </div>
   			    </div>   -->
                 <div class="col-sm-4">
					  <div class="form-group">
						   <label for="input-chamado-equipamento">Equipamento
						          <a th:href="@{/equipamentos/detalhes/{id}(id=${chamado.equipamento.id})}" class="fa fa-eye" title="Ver equipamento"></a>
						  </label>
                           <input id="input-chamado-equipamento" class="form-control" readonly="readonly" th:value="${chamado.equipamento.nome}" />
					  </div>
                </div>
                <div class="col-sm-4">
					  <div class="form-group">
						   <label for="input-chamado-equipamento-local">Local</label>
                           <input id="input-chamado-equipamento-local" class="form-control" readonly="readonly" th:value="${chamado.equipamento.local}" />
					  </div>
                </div>
                 <div class="col-sm-4">
					  <div class="form-group">
						   <label for="input-chamado-componente">Componente</label>
                           <input  id="input-chamado-componente" class="form-control" readonly="readonly" th:value="${chamado.componente}" />				 
					 </div>
                 </div>
               <div class="col-sm-4">
					  <div class="form-group">
						   <label for="input-chamado-loja">Loja 
						          <a th:href="@{/lojas/detalhes/{id}(id=${chamado.loja.id})}" title="Ver loja" class="fa fa-eye"></a>
						   </label>
                           <input id="input-chamado-loja" class="form-control" readonly="readonly" th:value="${chamado.loja.nome}" />
					  </div>
                </div> 
                 <div class="col-sm-4">
					  <div class="form-group">
						   <label for="input-chamado-usuario">Criado por 
						          <a th:href="@{/usuarios/detalhes/{id}(id=${chamado.usuario.id})}" class="fa fa-eye" title="Ver usuário"></a>
						   </label>
                          <input id="input-chamado-usuario" class="form-control" readonly="readonly" th:value="${chamado.usuario.nome}" />
					  </div>
                 </div>
                 <div class="col-sm-4" th:if="${chamado.status.idStatus != 0}">
					  <div class="form-group">
						   <label for="input-chamado-tecnico">Atendido por
						          <a th:href="@{/usuarios/detalhes/{id}(id=${chamado.tecnico.id})}" class="fa fa-eye" title="Ver usuário"></a>
						   </label>
                          <input id="input-chamado-tecnico" class="form-control" readonly="readonly" th:value="${chamado.tecnico.nome}" />
					  </div>
                 </div>                                                   			
                 <div class="col-sm-4">
					  <div class="form-group">
						   <label for="input-chamado-prioridade">Prioridade</label>
                           <input  id="input-chamado-prioridade" class="form-control" readonly="readonly" th:value="${chamado.prioridade}" />				 
					 </div>
                 </div>


                 <div class="col-sm-4">
					  <div class="form-group">
						   <label for="input-chamado-status">Status</label>
                          <input id="input-chamado-status" class="form-control" readonly="readonly" th:value="${chamado.status}" />
					  </div>
                 </div>
                 <div class="col-sm-4">
					  <div class="form-group">
						   <label for="input-chamado-status">Status2222</label>
                          <input id="input-chamado-status" class="form-control" readonly="readonly" th:value="${chamado.status}" />
					  </div>
                 </div>            

         </div>        
         
         <div th:if="${chamado.status.idStatus != 0}">
             <th:block  th:each="solucao : ${chamado.solucoes}"> 
                                        <fieldset class="form-group" style="padding-top: 5px">
                             <legend>Datas</legend></fieldset>
               
               <div class="row">           
                          
                        <div class="col-sm-4">
					         <div class="form-group">
						          <label for="input-chamado-criacao">Data de Abertura</label>
                                  <input id="input-chamado-criacao" class="form-control" readonly="readonly" th:value="${solucao.datas.dataCriacaoF}" />
					         </div>
                       </div>                         
                            
                          <div class="col-sm-4">
					           <div class="form-group">
						            <label for="input-chamado-atendimento">Inicio de Atendimento</label>
                                   <input id="input-chamado-atendimento" class="form-control" readonly="readonly" th:value="${solucao.datas.dataCriacaoF}" />
					          </div>
                          </div>
                 
                     <div  th:if="${chamado.status.idStatus != 1}">                                         
                       <div class="col-sm-4">
					        <div class="form-group">
						         <label for="input-chamado-finalizazao">Data de Finalização</label>
                                <input id="input-chamado-finalizazao" class="form-control" readonly="readonly" th:value="${solucao.datas.dataCriacaoF}" />
					        </div>
                       </div>
                       <div class="col-sm-4">
					        <div class="form-group">
						         <label for="input-chamado-tempo-total">Tempo de Atendimento</label>
                                <input id="input-chamado-tempo-total" class="form-control" readonly="readonly" th:value="${solucao.datas.dataCriacaoF}" />
					        </div>
                       </div>  
                 
             </div>     
           </div> 
       
                                             
               <div id="informacoes" th:if="${chamado.status.idStatus == 2} ? ${chamado.status.idStatus == 2}">
                                                                                <fieldset class="form-group" style="padding-top: 5px">
                             <legend>Solução</legend></fieldset>   
                                
                  <div class="row">      

                            
                             <div class="col-sm-4">                      
                                   <div class="form-group">
						                  <label for="input-chamado-tipoSolucao">Tipo Solucao</label>
                                          <input id="input-chamado-tipoSolucao" th:value="${solucao.tipoSolucao}" readonly="readonly" class="form-control js-moeda" />
					               </div>
                             </div>
                            
                            
                            
                             <div class="col-sm-4">                      
                                   <div class="form-group">
						                  <label for="input-chamado-locomocao">Gastos com locomoção</label>
                                          <input id="input-chamado-locomocao" th:value="${solucao.valorTransporte}" readonly="readonly" class="form-control js-moeda" />
					               </div>
                             </div>
                             <div class="col-sm-4">                      
                                   <div class="form-group">
						                  <label for="input-chamado-outrosGastos">Outros gastos</label>
                                          <input id="input-chamado-outrosGastos" th:value="${solucao.outrosValores}" readonly="readonly" class="form-control js-moeda" />
					               </div>
                             </div>
                       <div class="col-sm-4">                      
                            <div class="form-group">
						         <label for="valorTotal">Valor Total</label>
                                 <input id="valorTotal" class="form-control" th:value="${solucao.valorTotal}" readonly="readonly" />
					       </div>
                      </div>                                              
              </div>
                     
            </div>    
    		   			   
   			<div id="informacoes" th:if="${chamado.status.idStatus == 2} ? ${chamado.status.idStatus == 2}">   
   			   <div class="form-group" >
					<label for="textarea-chamado-descricao-solucao">Solução</label>
					<textarea   id="textarea-chamado-descricao-solucao" maxlength="600" th:text="${solucao.descricaoSolucao}" readonly="readonly"  rows="3"
					class="form-control"></textarea>
			  </div>
              <div class="form-group" th:if="${chamado.reAbrir != null} ? ${chamado.reAbrir != null}">
					      <label for="textarea-chamado-descricao-solucao">Motivo de Reabertura</label>
					      <textarea   id="textarea-chamado-descricao-solucao" maxlength="600" readonly="readonly"  rows="3"
					                  class="form-control"></textarea>
			  </div>          
          
          </div>
          
          
        </th:block>   
   </div>         
                   
                   
                   
                   
  
			  
			  
			  
			  
			            
              		

				</form>
				
				
				
               <th:block th:if="${chamado.tecnico != null}">
                   <a th:href="@{/chamados/finalizar/{id}(id=${chamado.id})}" class="btn btn-danger" 
                      th:if="${chamado.status.idStatus == 1 } and ${chamado.tecnico.id == logon.id}" sec:authorize="hasAnyRole('ROLE_ADMINISTRADOR','ROLE_TECNICO')">Finalizar</a>
               </th:block>
               
               <a th:href="@{/chamados/atender/{id}(id=${chamado.id})}" class="btn btn-success" 
                  th:if="${chamado.status.idStatus == 0}" sec:authorize="hasAnyRole('ROLE_ADMINISTRADOR','ROLE_TECNICO')">Atender</a>
                  <a href="javascript:history.back()" class="btn  btn-warning">Reabrir <span class="fa fa-arrow-left"></span></a>
               <a href="javascript:history.back()" class="btn  btn-primary">Voltar <span class="fa fa-arrow-left"></span></a>
			</div>
			
			
</section>
</body>
</html>